syntax = "proto2";

package fairway.chatpb;
option go_package = "github.com/fairway-corp/chatpb";
option (gogoproto.unmarshaler_all) = true;
option (gogoproto.marshaler_all) = true;
option (gogoproto.sizer_all) = true;

import "gogoproto/gogo.proto";

// message BotMessage{
//   option (gogoproto.goproto_unrecognized) = false;
//   optional uint64 id = 11 [(gogoproto.customname) = "ID", (gogoproto.nullable) = false, (gogoproto.jsontag) = "-", (gogoproto.moretags) = "db:\"id\""];
//   optional string message_id = 12 [(gogoproto.customname) = "MessageID", (gogoproto.nullable) = false, (gogoproto.jsontag) = "messageId", (gogoproto.moretags) = "db:\"message_id\""];
//   optional string room_id = 13 [(gogoproto.customname) = "RoomID", (gogoproto.nullable) = false, (gogoproto.jsontag) = "roomId", (gogoproto.moretags) = "db:\"room_id\""];
//   optional string user_id = 14 [(gogoproto.customname) = "UserID", (gogoproto.nullable) = false, (gogoproto.jsontag) = "userId", (gogoproto.moretags) = "db:\"user_id\""];
//   optional string type = 15 [(gogoproto.nullable) = false, (gogoproto.moretags) = "db:\"type\""];
//   optional BotPayload payload = 16 [(gogoproto.nullable) = false, (gogoproto.moretags) = "db:\"payload\""];
//   optional int32 role = 17 [(gogoproto.nullable) = false, (gogoproto.moretags) = "db:\"role\""];
//   optional int64 created = 30 [(gogoproto.nullable) = false, (gogoproto.moretags) = "db:\"created\""];
//   optional int64 modified = 31 [(gogoproto.nullable) = false, (gogoproto.moretags) = "db:\"modified\""];
//   optional string event_name = 41 [(gogoproto.nullable) = false, (gogoproto.jsontag) = "eventName", (gogoproto.moretags) = "db:\"-\""];
// }

message BotPayload{
  option (gogoproto.goproto_unrecognized) = false;
  optional string text = 1;
  repeated BotAction actions = 2;

  optional string type = 3;
  optional string thumbnailImageUrl = 4 [(gogoproto.customname) = "ThumbnailImageURL", (gogoproto.jsontag) = "thumbnailImageUrl"];
  optional string imageAspectRatio = 5 [(gogoproto.jsontag) = "imageAspectRatio"];
  optional string imageSize = 6 [(gogoproto.jsontag) = "imageSize"];
  optional string imageBackgroundColor = 7 [(gogoproto.jsontag) = "imageBackgroundColor"];
  optional string title = 8;
  optional BotAction defaultAction = 9 [(gogoproto.jsontag) = "defaultAction"];

  repeated BotColumn columns = 10;

  optional float score = 11;
}

message BotAction{
  option (gogoproto.goproto_unrecognized) = false;
  optional string type = 11;
  optional string label = 12;
  optional string data = 14;
  optional string displayText = 15 [(gogoproto.jsontag) = "displayText"];
  optional string text = 16;
}

message BotColumn{
  option (gogoproto.goproto_unrecognized) = false;
  optional string thumbnailImageUrl = 1 [(gogoproto.customname) = "ThumbnailImageURL", (gogoproto.jsontag) = "thumbnailImageUrl"];
  optional string imageBackgroundColor = 2 [(gogoproto.jsontag) = "imageBackgroundColor"];
  optional string title = 3;
  optional string text = 4;
  optional BotAction defaultAction = 5 [(gogoproto.jsontag) = "defaultAction"];
  repeated BotAction actions = 6;

  optional string imageUrl = 7 [(gogoproto.jsontag) = "imageUrl"];
  optional BotAction action = 8;
}

message LineMessage{
  option (gogoproto.goproto_unrecognized) = false;
  optional string to = 1;
  repeated LineMessagePayload messages = 2;
}

message LineMessagePayload {
  option (gogoproto.goproto_unrecognized) = false;
  optional string type = 1 [(gogoproto.nullable) = false];
  optional string text = 2 [(gogoproto.nullable) = false];
}

message OutgoingMessageLineRequest {
  option (gogoproto.goproto_unrecognized) = false;
  optional string endpoint = 1 [(gogoproto.nullable) = false];
  optional LineMessage message = 2;
}

message SlackMessage {
  option (gogoproto.goproto_unrecognized) = false;
  optional string text = 2 [(gogoproto.nullable) = false];
}

message OutgoingMessageSlackRequest {
  option (gogoproto.goproto_unrecognized) = false;
  optional string endpoint = 1 [(gogoproto.nullable) = false];
  optional SlackMessage message = 2;
}